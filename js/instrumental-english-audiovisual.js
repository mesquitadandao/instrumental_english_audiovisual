String.prototype.extractUniqueWordsEnglish=function(){return this.toLowerCase().gsub(/'\s|\s'/," ").gsub(/_/," ").gsub(/'/,"_").gsub(/\W|\d/," ").gsub(/_/,"'").gsub(/\s+/," ").trim().split(/\s/).uniq()};var MDTranslator=function(){var t,o="http://api.microsofttranslator.com/v2/ajax.svc/TranslateArray2",i="_HOST_?appId=_APPID_&oncomplete=MDT._continue&onerror=MDT._break&texts=_TEXTS_&from=_FROM_&to=_TO_",n=[],r=null,s="en",u=!1;this.words=function(t){return r='["'+t.join('","')+'"]',n=t,this},this.from=function(t){return s=t,this},this.to=function(n){t=n;var a=i.gsub(/_HOST_/,o).gsub(/_APPID_/,window._mstConfig.appId).gsub(/_TEXTS_/,r).gsub(/_FROM_/,s).gsub(/_TO_/,t);u=!0,$.getScript(a)},this._continue=function(o){for(var i=[],r=0;r<o.length;r++){var a=n[r],e=s,p=MDA.build(e,a),_=o[r].TranslatedText.toLowerCase(),l=t,d=MDA.build(l,_);i.push({origin:{text:a,audio:p},translation:{text:_,audio:d}})}this.completed(i),u=!1},this._break=function(){this.completed([]),u=!1},this.translating=function(){return u}};Audio.prototype.defaultPlay=Audio.prototype.play,Audio.prototype.playing=!1,Audio.prototype.newPlay=!0,Audio.prototype.hasError=!1,Audio.prototype.play=function(t){if(t){if(t>1){var o=this.newPlay?2:1;this.loop=!0,this.onseeked=function(){this.loop=o++<t}}}else this.loop=!0,this.onseeked=function(){};this.playing=!0,this.newPlay=!1,this.hasError?this.onerror():this.defaultPlay()},Audio.prototype.stop=function(){this.loop=!1};var MDAudio=function(){var t="http://api.microsofttranslator.com/v2/http.svc/Speak?format=audio/mp3&options=MaxQuality&appid=_APPID_&language=_LANGUAGE_&text=_TEXT_";this.build=function(o,i){return function(){return new Audio(t.gsub(/_APPID_/,window._mstConfig.appId).gsub(/_LANGUAGE_/,o).gsub(/_TEXT_/,i))}}},MDT=new MDTranslator,MDA=new MDAudio;